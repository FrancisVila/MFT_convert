{
    "title": "Facilitate deployment",
    "linkTitle": "Facilitate deployment",
    "weight": "210"
}Transfer CFT delivers procedures that can help you deploy instances to other LPARs as well as deploy patches and service packs.

You require the following environments in order to install and deploy Transfer CFT:

-   Distribution environment
-   Transfer CFT run-time instance environment

For a detailed description of these environments, see [Non-SMP/E: Create the distribution environment](../../overview_install_zos/distribution_environment_installation) .

Deployment overview

The following sections describe how to:

-   [Create a master copy](#create) (1)
-   [Distribute the master copy](#distribu) (2)
-   [Restore the master copy](#restore) (3)
-   [Install the instance](#install) (4)

![](temp_deploy_sp_zos.png)

 

Deploy a patch or service pack

-   [Generate a patch or service pack](#generate) (1)
-   [Transfer the generated patch or service pack](#transfer) (2)
-   [Apply the patch or service pack](#apply) (3)

![](temp_deploy_sp_zos.png)

## Overview

The reference environment includes:

-   Distribution libraries
-   A reference instance for applied patches and service packs from which procedures will be submitted
-   Optionally, an instance called 'model' that allows you to deliver specific or modified objects.

## Prerequisite

Minimum version 324 SP2

If you are working in a Transfer CFT 3.2.4 SP1 or earlier environment, update to CFT 3.2.4 SP2, then copy A33GMAS, A33GPTF, A33GSND, A33IMAS and A33IPTF procedures from the INSTALL distribution library to the reference INSTALL library using A13JCL.

## <span id="Create"></span>Create a master copy

A master copy is the product version that you want to deploy, and can be either a basic Transfer CFT installation, or a specific patch or service pack level.

Use the **A33GMAS JCL** to create the master copy from the distribution environment and from the reference instance.

You must customize the following 4 variables before submitting the JCL.

-   SQUAL Qualifying source:
    -   Mode 1: Prefix distribution
    -   Mode 2: Prefix model target
-   TQUAL: Transport prefix qualifier
-   COPBASE Copilot PAX id: COPBASE, SP id or NONE
-   XSRBASE Secure relay PAX id: XSRBASE, SP id or NONE

An XMIT file is generated.

## <span id="Distribu"></span>Distribute the master copy

Use the A33GSND JCL to transfer the following elements via FTP:

-   Master copy
-   The components necessary to restore the master copy

<table cellpadding="0" cellspacing="0">
   <col/>
   <col/>
   <col/>
      <tr>
         <td valign="top">         </td>
         <td valign="top"><span><b>Note</b></span>
         </td>
         <td data-mc-autonum="&lt;b&gt;Note&lt;/b&gt;" valign="top">Customize variables  before submitting the JCL.          </td>
      </tr>
</table>

-   Common variables:
    -   ADDRESS Remote address
    -   RQUAL Remote QUALIFIER (instance prefix)
    -   RVOL Remote Volume (optional)
    -   USER User for FTP
    -   PSW Password for FTP
-   Specific variables:
    -   SNDFIL the master copy file (ADRDSSU/XMIT, generated by A33GMAS)
    -   MEMPRD the product name defined in A33IMAS
    -   MEMJCL A33IMAS JCL to restore the product

This creates a remote UPLIB library.

## <span id="Restore"></span>Restore the master copy

1.  Customize the following variables before submitting the A33IMAS JCL.
    -   QUAL: identifies the prefix under which the Transfer CFT instance is restored
    -   PUPLIB: Set variable PUPLIB in accordance with A33GSND
2.  From the transferred UPLIB, use A33IMAS JCL to restore the master version.

This creates an instance.

## <span id="Install"></span>Install the instance

1.  Use A00CUSTO JCL to customize the instance.
2.  Customize the following variables before submitting the JCL:
    -   SET CFTV2 = XX.YY.ZZ instance prefix
    -   SET DISTLIB = XX.YY distribution prefix
    -   SET DISTLEV = ZZ distribution suffix (last level of CFTV2)
3.  If required, adapt the A03PARM JCL and submit it.
4.  Run the JCL A05ALL.

This completes the specific part of the Transfer CFT installation. Remaining tasks in include the APF, creating the STC in PROCLIB, etc.

<table cellpadding="0" cellspacing="0">
   <col/>
   <col/>
   <col/>
      <tr>
         <td valign="top">         </td>
         <td valign="top"><span><b>Note</b></span>
         </td>
         <td data-mc-autonum="&lt;b&gt;Note&lt;/b&gt;" valign="top">ZFS file creation  is not taken into account in this process.         </td>
      </tr>
</table>

## <span id="Generate"></span>Generate a patch or service pack

### Prerequisites

The reference target environment must be up to date.

### Procedure

1.  Use A33GPTF JCL to generate a patch or a service pack from the distribution environment and the reference instance.
2.  Customize the following 3 parameters before submitting the JCL:

-   SQUAL = & DISTLIB Source prefix qualifier
-   TQUAL = CFTDEV.REF.TRANSPOR Transport prefix qualify
-   ID = 0xxxxx Patch id

An XMIT file is generated.

## <span id="Transfer"></span>Transfer the generated patch or service pack

You can use the **A33GSND JCL** to transfer the following elements via FTP:

-   A patch or service pack
-   Components to apply the patch

Customize the variables before submitting the JCL.

-   Common variables:
    -   ADDRESS Remote address
    -   RQUAL Remote QUALIFIER (instance prefix)
    -   RVOL Remote Volume (optional)
    -   USER User for FTP
    -   PSW Password for FTP
-   Specific variables:
    -   ID='0xxxxx' Patch id
    -   SNDFIL=&QUAL..CF&ID Path/SP package (ADRDSSU/XMIT, generated by A33GPTF)
    -   MEMPRD=CF&ID Patch id (member in UPLIB)
    -   MEMJCL=A33IPTF JCL to install Patch

This creates a remote UPLIB library.

## <span id="Apply"></span>Apply the patch or service pack

<table cellpadding="0" cellspacing="0">
   <col/>
   <col/>
   <col/>
      <tr>
         <td valign="top">         </td>
         <td valign="top"><span><b>Note</b></span>
         </td>
         <td data-mc-autonum="&lt;b&gt;Note&lt;/b&gt;" valign="top">Save the Transfer CFT LOAD, as well as the Copilot USS environment prior to applying a patch.         </td>
      </tr>
</table>

1.  Customize the A33IPTF JCL delivered in the UPLIB library, and transferred by A33GSND:   
    

    <table cellspacing="0">
   <col/>
   <tbody>
      <tr>
         <td>
            <p>Set JCLLIB using the instance prefix qualifiers.</p>
            <p>Set the variable ID: Patch ID.</p>
            <p>Set the variable PUPLIB in accordance with A33GSND.</p>
         </td>
      </tr>
   </tbody>
</table>

2.  Submit the JCL.

The instance is now updated.
