<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../../" data-mc-toc-path="Installation (allOS)|Installation and operation z/OS|Installation|Advanced installation " data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Enable Sentinel and Event Router</title>
        <link rel="shortcut icon" href="../../Resources/Images/favicon.ico" />
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/axway.css" rel="stylesheet" type="text/css" />
        <link href="../../Resources/TableStyles/SynchTableStyle.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link href="../../Resources/TableStyles/code_window.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <script src="../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div role="main" id="mc-main-content">
            <h1>Enable Sentinel and Event Router</h1>
            <p> Enabling the Axway Sentinel option for Transfer CFT is generally comprised of the following steps, which you must execute in the order listed:</p>
            <ul>
                <li>Install the Event Router </li>
            </ul>
            <ul>
                <li>Set the Sentinel parameters in the unified configuration file</li>
            </ul>
            <ul>
                <li>Create a LOGGER type padding file (optional)<ul><li>Use the LOGGER&#160;in a SYSPLEX </li></ul></li>
            </ul>
            <ul>
                <li>Shut down Transfer CFT</li>
            </ul>
            <ul>
                <li>Restart Transfer CFT</li>
            </ul>
            <table class="AutoNumber_p_note" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
                <col style="width: 25px;" />
                <col style="width: 45px;" />
                <col style="width: auto;" />
                <tr>
                    <td valign="top" />
                    <td class="AutoNumber_p_note" valign="top"><span><b>Note</b></span>
                    </td>
                    <td class="AutoNumber_p_note" valign="top" data-mc-autonum="&lt;b&gt;Note&lt;/b&gt;">Universal Agent installation is necessary only for end-to-end application monitoring.</td>
                </tr>
            </table>
            <h2>Procedure</h2>
            <p>This section provides step by step instructions for installing Sentinel for Transfer CFT z/OS.</p>
            <h3><a name="Install the Event Router"></a>Install the Event Router </h3>
            <p>For detailed information about Event Router installation refer to the Sentinel Event Router information in the <em>Axway A 5 Suite Prerequisites and Installation Guide</em>.</p>
            <ul>
                <li>During the installation procedure, specify the creation of the BUFFER file as the type LOGGER (under SYSPLEX).</li>
                <li>During setup, a LOGGER type BUFFER file is created. Note the name of the file for use when setting values of the configuration file.</li>
            </ul>
            <p>If the Event Router is not set up, you must create a LOGGER type file using the JCL: SN10CLGR.</p>
            <h3><a name="Set the Sentinel parameters  A00CUSTO"></a>Set the Sentinel parameters  A00CUSTO</h3>
            <p>You can set the Sentinel parameters in the unified configuration. If the Sentinel parameters are already customized, skip this section. Otherwise, customization parameters are located in the parameter file A03PARM of the installation library (sntlocad, sntladd, sntlp, sntlqueue, sntlgstr).</p>
            <p>For a description of the general parameters refer to the Event Router information in the <em>Sentinel</em> documentation.</p>
            <table class="AutoNumber_p_note" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
                <col style="width: 25px;" />
                <col style="width: 45px;" />
                <col style="width: auto;" />
                <tr>
                    <td valign="top" />
                    <td class="AutoNumber_p_note" valign="top"><span><b>Note</b></span>
                    </td>
                    <td class="AutoNumber_p_note" valign="top" data-mc-autonum="&lt;b&gt;Note&lt;/b&gt;">If the communication mode between Transfer CFT and the Event Router is an XCF type, and the TRKSVC is equal to 0, then you must define the Transfer CFT executable library as APF authorized.</td>
                </tr>
            </table>
            <h3><a name="Activate the unified configuration file parameters SN05CONF"></a>Activate the unified configuration file parameters SN05CONF</h3>
            <p>Before submitting the SN05CONF JCL, you can modify the command file. Enter:</p>
            <p class="bold_in_para">Trktname parameter</p>
            <ul>
                <li>Using a buffer file is strongly encouraged, but not mandatory. If you prefer to not use a buffer file, modify the command UCONFSET as follows:</li>
            </ul>
            <table style="width: 90%;mc-table-style: url('../../Resources/TableStyles/code_window.css');" class="TableStyle-code_window" cellspacing="0">
                <col class="TableStyle-code_window-Column-Column1" />
                <tbody>
                    <tr class="TableStyle-code_window-Body-Body1">
                        <td class="TableStyle-code_window-BodyA-Column1-Body1">UCONFSET ID=sentinel.TRKTNAME,VALUE=</td>
                    </tr>
                </tbody>
            </table>
            <ul>
                <li>The following message displays in the log when you restart Transfer CFT:</li>
            </ul>
            <table style="width: 90%;mc-table-style: url('../../Resources/TableStyles/code_window.css');" class="TableStyle-code_window" cellspacing="0">
                <col class="TableStyle-code_window-Column-Column1" />
                <tbody>
                    <tr class="TableStyle-code_window-Body-Body1">
                        <td class="TableStyle-code_window-BodyA-Column1-Body1">CFTS31W XTRK Warning No Buffer File(LOGGER file)defined Error Code = -1</td>
                    </tr>
                </tbody>
            </table>
            <p class="noteDoc">To connect to the Event Router via XFC, manually modify the commands file to activate the appropriate communication mode and comment commands:</p>
            <table style="width: 90%;mc-table-style: url('../../Resources/TableStyles/code_window.css');" class="TableStyle-code_window" cellspacing="0">
                <col class="TableStyle-code_window-Column-Column1" />
                <tbody>
                    <tr class="TableStyle-code_window-Body-Body1">
                        <td class="TableStyle-code_window-BodyA-Column1-Body1">/* UCONFSET ID=sentinel.TRKIPADDR,<p class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; VALUE=sntladdr&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </p><p class="code">&#160;&#160;&#160;&#160; UCONFSET ID=sentinel.TRKIPPORT,VALUE=sntlp*/</p></td>
                    </tr>
                </tbody>
            </table>
            <h3><a name="Create_a_LOGGER_type_padding_file&#160;(optional)"></a>Create a LOGGER type padding file&#160;(optional)</h3>
            <p>If the Transfer CFT does not use the same padding file as the Event Router, you must create a padding file. This LOGGER type file should not be shared with other applications. &#160;</p>
            <p>The new LOGGER file is a DASD-ONLY type file. Use the JCL SN10CLGR, via the IBM IXCMIAPU utility, to create this file. </p>
            <p><strong>Example</strong> </p>
            <table cellspacing="0" class="TableStyle-code_window" style="mc-table-style: url('../../Resources/TableStyles/code_window.css');width: 90%;">
                <col class="TableStyle-code_window-Column-Column1" />
                <tr class="TableStyle-code_window-Body-Body1">
                    <td class="TableStyle-code_window-BodyD-Column1-Body1">
                        <p class="code_1">DEFINE LOGSTREAM NAME(sntlgstr)</p>
                        <p class="code_1">DASDONLY(YES) </p>
                        <p class="code_1">LOWOFFLOAD(0) </p>
                        <p class="code_1">LS_SIZE(180)</p>
                        <p class="code_1">STG_SIZE(0) </p>
                        <p class="code_1">MAXBUFSIZE(64000)</p>
                    </td>
                </tr>
            </table>
            <p>The keywords that are displayed in bold should be substituted by the JCL A00CUSTO. For more information refer to the IBM documentation on <em>Setting up a Sysplex</em>.</p>
            <h4>Use the LOGGER&#160;file in a SYSPLEX &#160;</h4>
            <p>To create an overflow file (LOGGER)&#160;that is available for all  SYSPLEX partitions, in the Coupling Facility Resource Manager (CFRM) add the following structure (<span class="code">&amp;userstr</span>) to the coupling data set.</p>
            <p><span class="bold_in_para">Example </span>
            </p>
            <table style="width: 90%;mc-table-style: url('../../Resources/TableStyles/code_window.css');" class="TableStyle-code_window" cellspacing="0">
                <col class="TableStyle-code_window-Column-Column1" />
                <tbody>
                    <tr class="TableStyle-code_window-Body-Body1">
                        <td class="TableStyle-code_window-BodyA-Column1-Body1">
                            <p> The following is an example of a structure definition:</p>
                            <p>STRUCTURE NAME(&amp;userstr)</p>
                            <p>SIZE(6000)</p>
                            <p>INITSIZE(1200)</p>
                            <p>REBUILDPERCENT(30)</p>
                            <p>PRELIST(FACIL02,FACIL01)</p>
                            <p>&#160;</p>
                            <p> The following is an example of a logstream definition:</p>
                            <p>DEFINE LOGSTREAM NAME(&amp;LGRID)</p>
                            <p>STRUCTNAME(&amp;userstr)</p>
                            <p>&amp;Userstr is the structure name</p>
                            <p>&amp;LGRID is the logger file name</p>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table class="AutoNumber_p_note" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
                <col style="width: 25px;" />
                <col style="width: 45px;" />
                <col style="width: auto;" />
                <tr>
                    <td valign="top" />
                    <td class="AutoNumber_p_note" valign="top"><span><b>Note</b></span>
                    </td>
                    <td class="AutoNumber_p_note" valign="top" data-mc-autonum="&lt;b&gt;Note&lt;/b&gt;">You must be a system administrator to perform these operations.</td>
                </tr>
            </table>
            <h3><a name="Overflow file definition"></a>Overflow file definition </h3>
            <p>The following table describes the overflow file definition for the Logger file, where:</p>
            <ul>
                <li>TRKSHAREDFILE=YES is MANDATORY when the logger file is shared between the Event Router and applications. Set this to NO if the applications are sending messages directly to the Sentinel server without going through a ER</li>
                <li>The log structure is ONLY used to define  a logger file shared between the partitions of the SYSPLEX, and is NOT referenced in any parameters</li>
            </ul>
            <table cellspacing="0" class="TableStyle-test_SynchTableStyle" style="width: 90%;mc-table-style: url('../../Resources/TableStyles/SynchTableStyle.css');">
                <col class="Column-Column1" />
                <col class="Column-Column1" />
                <col class="Column-Column1" />
                <col class="Column-Column1" />
                <thead>
                    <tr class="Head-Header1">
                        <th class="HeadE-Column1-Header1">&#160;</th>
                        <th class="HeadE-Column1-Header1">Event Router</th>
                        <th class="HeadE-Column1-Header1">TRKUTIL</th>
                        <th class="HeadD-Column1-Header1">Transfer CFT 2.7 and later</th>
                    </tr>
                </thead>
                <tr class="Body-Body1" data-mc-conditions="">
                    <th class="BodyE-Column1-Body1">Configuration file</th>
                    <td class="BodyE-Column1-Body1">USEPARIN</td>
                    <td class="BodyE-Column1-Body1">TRKCONF</td>
                    <td class="BodyD-Column1-Body1">UCONF</td>
                </tr>
                <tr class="Body-Body2" data-mc-conditions="">
                    <th class="BodyE-Column1-Body2" rowspan="2">Logger file</th>
                    <td class="BodyE-Column1-Body2">
                        <p>	(AGENT)</p>
                        <p>api_file=</p>
                    </td>
                    <td class="BodyE-Column1-Body2">	TRKTNAME=</td>
                    <td class="BodyD-Column1-Body2">	UCONFSET ID=sentinel.TRKTNAME, VALUE=xxxx.xxxx.xxx</td>
                </tr>
                <tr class="Body-Body1" data-mc-conditions="">
                    <td class="BodyE-Column1-Body1">&#160;</td>
                    <td class="BodyE-Column1-Body1">TRKSHAREDFILE=YES	</td>
                    <td class="BodyD-Column1-Body1">UCONFSET ID=sentinel.TRKSHAREDFILE,VALUE=YES</td>
                </tr>
            </table>
            <h3>&#160;<a name="Communication with the Event Router"></a>Communication with the Event Router </h3>
            <p>The following parameters define communication with the Event Router via XCF. In this setup: </p>
            <ul>
                <li>The XCF definition (queue=xxxx) is the XCF member name representing the ER server</li>
                <li>The XCF group is   PELISCOP by default. You can modify this default by setting queue = “member group”</li>
            </ul>
            <table cellspacing="0" class="TableStyle-test_SynchTableStyle" style="width: 90%;mc-table-style: url('../../Resources/TableStyles/SynchTableStyle.css');">
                <col class="Column-Column1" />
                <col class="Column-Column1" />
                <col class="Column-Column1" />
                <col class="Column-Column1" />
                <thead>
                    <tr class="Head-Header1">
                        <th class="HeadE-Column1-Header1">&#160;</th>
                        <th class="HeadE-Column1-Header1">Event Router</th>
                        <th class="HeadE-Column1-Header1">TRKUTIL</th>
                        <th class="HeadD-Column1-Header1">Transfer CFT 2.6.x</th>
                    </tr>
                </thead>
                <tr class="Body-Body1" data-mc-conditions="">
                    <td class="BodyE-Column1-Body1">Configuration file</td>
                    <td class="BodyE-Column1-Body1">USEPARIN</td>
                    <td class="BodyE-Column1-Body1">TRKCONF</td>
                    <td class="BodyD-Column1-Body1">UCONF</td>
                </tr>
                <tr class="Body-Body2" data-mc-conditions="">
                    <td class="BodyE-Column1-Body2">SVC</td>
                    <td class="BodyE-Column1-Body2">
                        <p>(SYSTEM) </p>
                        <p>svc_nb=nnn</p>
                    </td>
                    <td class="BodyE-Column1-Body2">TRKSVC=nnn</td>
                    <td class="BodyD-Column1-Body2">UCONFSET ID=sentinel.TRKSVC,VALUE=nnn</td>
                </tr>
                <tr class="Body-Body1" data-mc-conditions="">
                    <td class="BodyE-Column1-Body1" rowspan="2">XCF definition</td>
                    <td class="BodyE-Column1-Body1" rowspan="2">(AGENT)queue=</td>
                    <td class="BodyE-Column1-Body1">TRKQUEUE=</td>
                    <td class="BodyD-Column1-Body1">UCONFSET ID=sentinel.TRKQUEUE,VALUE=xxxx</td>
                </tr>
                <tr class="Body-Body2" data-mc-conditions="">
                    <td class="BodyE-Column1-Body2">TRKTYPE=XCF</td>
                    <td class="BodyD-Column1-Body2">UCONFSET ID=sentinel.TRKTYPE,VALUE=XCF</td>
                </tr>
            </table>
            <h3><a name="Modify the Transfer CFT start-up procedure"></a>Modify the Transfer CFT start-up procedure</h3>
            <p>During the start-up procedure, the task dedicated to managing messages towards Sentinel allocates a sysout (ddname=TRKOUT) for any generated error messages or traces.</p>
            <h3><a name="Register configuration file values"></a>Register configuration file values</h3>
            <p>For configuration file modifications to be taken into account, including updates, stop and then restart Transfer CFT.</p>
            <h3><a name="Set message sending mode"></a>Set message sending mode</h3>
            <p>Use the TRKTMODE parameter of the configuration file to manage the sending mode for messages emitted towards Sentinel.</p>
            <p>Possible values:</p>
            <ul>
                <li>TRKTMODE=I: Immediate, default value</li>
            </ul>
            <ul>
                <li>TRKTMODE=D: Differed, the messages are stored to the buffer file </li>
            </ul>
            <ul>
                <li>TRKTMODE=R: Retry, enables the management of a sending delay via a parameter TRKTCONNRETRY=nn in case of a connection problem with SENTINEL</li>
            </ul>
            <h3>TCP/IP source port conflict</h3>
            <p>Sentinel notifications can get the source port from the system when the variable sentinel.trk_min_port is set to '0' (zero).</p>
            <p>The system will assign one of the Ephemeral Port range (default is 1024 - 65535)</p>
            <p>Command: uconfset id='sentinel.trk_min_port',value=0</p>
            <h3>End-to-End monitoring examples</h3>
            <p>The following JCLs are available as end-to-end monitoring examples:</p>
            <ul>
                <li>SNTLCFT: The deposit of a file transfer command via the CFTUTIL utility, with the same CycleID as generated by the TRKUTIL SENDEVENT command. This is available in the INSTALL library.</li>
            </ul>
            <ul>
                <li>SNTLEXEC: The end of transfer procedure, associating an acknowledgement via the CFTUTIL utility and the ‘COMPUTEIDENT’, ‘SENDEVENT’, and ‘SENDCYCLE’ TRKUTIL command. This is available in the EXEC library.</li>
            </ul>
            <h2><a name="Heartbeats zOS"></a>Implement Heartbeat functionality<a name="kanchor50"></a></h2>
            <p>The CFTHEART JCL sets the unified configuration heartbeat values as follows:</p>
            <ul>
                <li>sentinel.heartbeat.enable = YES</li>
                <li>sentinel.heartbeat.periodicity = 300 (This recommended value has a direct correlation with the value defined in the Tracked Object.)</li>
                <li> sentinel.heartbeat.script = &lt;install_dir&gt;/extras/sentinel/MFTheartbeat.*</li>
                <li>sentinel.trkipaddr = sentinel.server.address</li>
                <li>sentinel.trkipport = Sentinel.qlt/auto.port value (default = 1305)</li>
                <li>
                sentinel.xfb.enable = YES
            </li>
            </ul>
        </div>
    </body>
</html>