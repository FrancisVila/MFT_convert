{
    "title": "Register with Central Governance",
    "linkTitle": "Register with Central Governance",
    "weight": "190"
}Transfer CFTs 3.1.3 or higher can register with Central Governance in one of two ways:

-   [Automatically activate connectivity](#automati)
-   [Manually activate connectivity](#manually_activate_cg)

Additional tasks:

-   [Register with Central Governance](#connect)

## <span id="Automati"></span>Automatically activate connectivity

**UNIX/Windows**

The automatic activation is only available on UNIX and Windows platforms, and can be done during the installation. Please refer to the OS specific *Transfer CFT Installation Guide &gt; Customize the initiliaze.properties file &gt; Central Governance section*.

## <span id="manually_activate_cg"></span>Manually activate connectivity

**All OS**<span id="Manual"></span>

This section describes how to manually modify the Transfer CFT configuration to enable Central Governance connectivity in command line if you did not do so during installation.

All commands in this section are performed using CFTUTIL unless stated otherwise.

### Prerequisites

-   You have the Central Governance shared secret that was generated by the Central Governance administrator.
-   Transfer CFT and Copilot services are stopped.

#### On Transfer CFT z/OS

Use compliant characters for the z/OS shared secret

When setting the Central Governance "shared secret" during a Transfer CFT z/OS installation, translation issues may occur if you use certain characters. For example, if you enter !SECRET (using code page IBM-1147) the shared secret is translated to §SECRET during the Central Governance registration. Therefore, you must use compliant characters in the shared secret value when working in a z/OS environment.

Verify the UCONF setting

Prior to the registration, you must ensure that the JCL CFTMON (copilot.misc.cftstart.enable = Yes) is configured to match the jobname or the STC name used to launch Transfer CFT.

### Procedure

All commands in this section are performed using CFTUTIL unless stated otherwise. For details on the UCONF parameters referenced in this section, please see [UCONF: Central Governance options](cg_uconf_register_parms.htm).

#### Disable previously used connectors

Enabling Central Governance connectivity if you have performed an upgrade replaces any standalone connectors. Therefore, prior to connecting to Central Governance you must deactivate all previously activated connectors, for example PassPort AM, PassPort PS, and Sentinel.

Unset the UCONF parameters:

<table data-cellspacing="0">
<tbody>
<tr class="odd">
<td><p>uconfunset id=am.type</p>
<p>uconfunset id=sentinel.xfb.enable</p>
<p>uconfset id=pki.type, value=cft</p></td>
</tr>
</tbody>
</table>

<table data-cellpadding="0" data-cellspacing="0">
<tbody>
<tr class="odd">
<td data-valign="top"></td>
<td data-valign="top"><span><strong>Note</strong></span></td>
<td data-mc-autonum="&lt;b&gt;Note&lt;/b&gt;" data-valign="top">When running in a z/OS environment you must additionally set the am.passport.superuser with the user that will start the Copilot server.</td>
</tr>
</tbody>
</table>

#### Define UCONF parameters used for Transfer CFT instance identification

Set the parameters used to identify a Transfer CFT instance. Follow these guidelines, otherwise the registration will fail:

-   The length of the `cft.instance_id` value is limited to 24 characters.
-   The address set in cft.full\_hostname must be reachable from Central Governance.

<table data-cellspacing="0">
<tbody>
<tr class="odd">
<td><p>uconfset id=cft.instance_id, value=&lt;cft_id&gt;</p>
<p>uconfset id=cft.instance_group, value=&lt;cft_instance_group&gt;</p>
<p>uconfset id=cft.full_hostname, value=&lt;cft_address&gt;</p></td>
</tr>
</tbody>
</table>

Additionally, if running in a multi-host/multi-node environment, you must set the load balancer address(FQDN or IP address) and port that Central Governance uses to reach the Transfer CFT (copilot.general.ssl\_serverport):

<table data-cellspacing="0">
<tbody>
<tr class="odd">
<td><p>uconfset id=cft.multi_node.load_balancer.host, value=&lt;load_balancer_address&gt;</p>
<p>uconfset id=<span>cft.multi_node.load_balancer.port,value=&lt;load_balancer_port&gt;</span></p></td>
</tr>
</tbody>
</table>

#### Optionally define a proxy server for Central Governance to Transfer CFT communication

If you opt to use a proxy server for Central Governance to connect to Transfer CFT, set the following parameters.

<table data-cellspacing="0">
<tbody>
<tr class="odd">
<td><p>uconfset id=cg.proxy.in.host, value= &lt;proxy_address&gt;</p>
<p>uconfset id=cg.proxy.in.port<span>,value= &lt;proxy_port&gt;</span></p>
<p>uconfset id=cg.proxy.in.login, value= &lt;proxy_login&gt;</p>
<p>uconfset id=<span>cg.proxy.in.password, value= &lt;proxy_login_password&gt;</span></p></td>
</tr>
</tbody>
</table>

#### Optionally define a proxy server for Transfer CFT to Central Governance communication

If you opt to use a proxy server for Transfer CFT to connect to Central Governance, set the following parameters.

<table data-cellspacing="0">
<tbody>
<tr class="odd">
<td><p>uconfset id=cg.proxy.out.host, value= &lt;proxy_address&gt;</p>
<p>uconfset id=cg.proxy.out.port,value= &lt;proxy_port&gt;</p>
<p>uconfset id=cg.proxy.out.login, value= &lt;proxy_login&gt;</p>
<p>uconfset id=cg.proxy.out.password, value= &lt;proxy_login_password&gt;</p></td>
</tr>
</tbody>
</table>

#### Import the root certificate for the Governance CA 

1.  Download the root Governance CA, which is used to authenticate Central Governance.
2.  Import this root CA into the PKI database using the PKIUTIL PKICER command.
3.  Set the `iname `to the root CA path.
4.  Define the UCONF variable `cg.ca_cert_id`, which must correspond with the value you set in the previous step. It is required so that Transfer CFT knows which certificate to use to authenticate Central Governance. Using CFTUTIL:

#### Define the parameters used for the Central Governance connection

Set  the following parameters that are used to connect to Central Governance.

<table data-cellspacing="0">
<tbody>
<tr class="odd">
<td><p>uconfset id=cg.host, value=&lt;cg_host_address&gt;</p>
<p>uconfset id=cg.port, value=&lt;cg_port&gt;</p></td>
</tr>
</tbody>
</table>

Set the shared secret that the Central Governance administrator generated and provided.

<table data-cellspacing="0">
<tbody>
<tr class="odd">
<td><p>uconfset id=cg.shared_secret, value=&lt;shared_secret&gt;</p></td>
</tr>
</tbody>
</table>

#### Optionally define the configuration policy for registration

You may want to automatically assign an existing Central Governance configuration policy during the Transfer CFT registration. To do so, set the UCONF parameter `cg.configuration_policy` to the name of the desired policy.

<table data-cellspacing="0">
<tbody>
<tr class="odd">
<td><p>uconfset id=cg.configuration_policy, value=&lt;name_of_policy&gt;</p></td>
</tr>
</tbody>
</table>

#### Optionally customize the business certificate Distinguished Name (DN)

To override the business certificate's Distinguished Name (DN), which is generated during the Central Governance registration or certificate renewal, set the UCONF parameter cg.certificate.business.csr\_dn to th e custom value. The default is O=Axway,OU=MFT,CN=%uconf:cft.full\_hostname%. Remember to separate tokens by a comma.

<table data-cellspacing="0">
<tbody>
<tr class="odd">
<td>uconfset id=cg.certificate.business.csr_dn, value='O=MyCompany,OU=MFT,CN=%uconf:cft.full_hostname%'</td>
</tr>
</tbody>
</table>

A best practice is to customize the certificate DN prior to registration. However, if you are customizing the certificate DN after the Transfer CFT registration, you can force an immediate renewal or wait for the automatic renewal as described in [SSL certificate renewal](../cg_postregister).

#### Optionally customize the governance certificate Distinguished Name (DN)

To override the governance certificate's Distinguished Name (DN), which is generated during the Central Governance registration or certificate renewal, set the UCONF parameter cg.certificate.governance.csr\_dn to the custom value. The default is O=Axway,OU=MFT,CN=&lt;Transfer CFT $(cft.instance\_id)>. Remember to separate tokens by a comma.

<table data-cellspacing="0">
<tbody>
<tr class="odd">
<td>uconfset id=cg.certificate.governance.csr_dn, value='O=MyCompany,OU=MFT,CN=%uconf:cft.full_hostname%'</td>
</tr>
</tbody>
</table>

A best practice is to customize the certificate DN prior to registration. However, if you are customizing the certificate DN after the Transfer CFT registration, you can force an immediate renewal or wait for the automatic renewal as described in [SSL certificate renewal](../cg_postregister).

#### <span id="Customize_keylength"></span>Optionally customize the certificates' key length

By default, Transfer CFT generates a key length of 2048 bits for its Governance and Business certificates. Optionally you can modify these values to 4096 bits.

<table data-cellspacing="0">
<tbody>
<tr class="odd">
<td><p>uconfset id=cg.certificate.governance.key_len, value=4096</p>
<p>uconfset id=cg.certificate.business.key_len, value=4096</p></td>
</tr>
</tbody>
</table>

#### Enable Central Governance

To enable connectivity, enter:

<table data-cellspacing="0">
<tbody>
<tr class="odd">
<td><p>uconfset id=cg.enable, value=yes</p></td>
</tr>
</tbody>
</table>

#### Perform the check command to validate parameters

Use the CFTUTIL CHECK command to validate the coherence of parameters, partners, and the Transfer CFT PKI database.

<table data-cellspacing="0">
<tbody>
<tr class="odd">
<td>CHECK CONTENT=BRIEF|FULL, FOUT=FileName</td>
</tr>
</tbody>
</table>

Check the list in the output for errors and correct all errors before attempting registration. See also, [Use the check command](../../c_intro_userinterfaces/about_cftutil/check_command).

## Register or re-register

Ensure that `cft_registration_id `is reset to -1. Otherwise, reset it as follows:  

<table data-cellspacing="0">
<tbody>
<tr class="odd">
<td><p>CFTUTIL uconfunset id=cg.registration_id</p></td>
</tr>
</tbody>
</table>

Start the Transfer CFT Copilot to automatically trigger registration with Central Governance. From the Central GovernanceUI, check the **Product List** to confirm that the registration was successful.

For troubleshooting issues refer to
[Troubleshooting: Installation and registration.](../../cft_intro_install/unix_install_start_here/troubleshoot_registration)
