<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../" data-mc-toc-path="Administration|Manage monitoring" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>auto_expand_catalog_docinfo (2)</title>
        <link rel="shortcut icon" href="../Resources/Images/favicon.ico" />
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/axway.css" rel="stylesheet" type="text/css" />
        <link href="../Resources/TableStyles/code_window.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link href="../Resources/TableStyles/SynchTableStyle_noshade.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div role="main" id="mc-main-content">
            <h1>Automatic  catalog expansion</h1>
            <p>The<span class="italic_in_para"> auto-expand </span>catalog option lets you  enlarge the catalog by a preset percentage when  an alert  is sent that the catalog is reaching its threshold. Additionally you can indicate a script to execute if this expanded limit is exceeded.</p>
            <h2>Overview</h2>
            <p>Once the catalog exceeds the minimum alert level, it can be expanded to the amount defined in the auto-expand option. For example, if you set the auto-expand to 100%, then the catalog doubles. If you define it as 50%, the catalog resizes to 1.5 times the original number of records. After the auto-expand limit is reached, a predefined script can be executed.</p>
            <p>If you defined a timer for catalog alerts, TLVCLEAR, once the usage surpasses the allotted time value one of the following occurs: </p>
            <ul>
                <li>The catalog is expanded and a message  sent to the log, but no script is executed</li>
                <li>The catalog is expanded, a message  is sent to the log, and the TLVCEXEC script executes.</li>
            </ul>
            <h2>Steps</h2>
            <p>To enable the auto-expand option, with  <span class="mc-variable axway_variables.Component_Short_Name variable">Transfer CFT</span>&#160;running:</p>
            <ol>
                <li class="li_1" value="1">Set the uconf values for:<ul><li class="code">cft.cftcat.auto_expand_percent </li><li class="code">cft.cftcat.auto_expand_max_size</li></ul></li>
                <li class="li_1" value="2">To activate the new values, run the command: <span class="code">CFTUTIL reconfig type = uconf</span><ul><li class="li_1">If  <span class="mc-variable axway_variables.Component_Short_Name variable">Transfer CFT</span>&#160;is stopped when setting uconf values, you do not need to execute the <span class="code">reconfig </span>command.</li></ul></li>
            </ol>
            <table style="width: 90%;mc-table-style: url('../Resources/TableStyles/SynchTableStyle_noshade.css');" class="TableStyle-SynchTableStyle_interop" cellspacing="0">
                <col class="TableStyle-SynchTableStyle_interop-Column-Column1" />
                <col class="TableStyle-SynchTableStyle_interop-Column-Column1" />
                <col class="TableStyle-SynchTableStyle_interop-Column-Column1" />
                <thead>
                    <tr class="TableStyle-SynchTableStyle_interop-Head-Header1">
                        <th class="TableStyle-SynchTableStyle_interop-HeadE-Column1-Header1">Parameter </th>
                        <th class="TableStyle-SynchTableStyle_interop-HeadE-Column1-Header1">Default</th>
                        <th class="TableStyle-SynchTableStyle_interop-HeadD-Column1-Header1">Description </th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="TableStyle-SynchTableStyle_interop-Body-Body2">
                        <td class="TableStyle-SynchTableStyle_interop-BodyE-Column1-Body2">cft.cftcat.auto_expand_percent</td>
                        <td class="TableStyle-SynchTableStyle_interop-BodyE-Column1-Body2" style="text-align: center;">0</td>
                        <td class="TableStyle-SynchTableStyle_interop-BodyD-Column1-Body2">
                            <p>This value indicates the factor increase, as a percentage, that the catalog will automatically expand. </p>
                            <p>The value 0 disables the automatic expansion feature.</p>
                            <table class="AutoNumber_p_note" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
                                <col style="width: 23px;" />
                                <col style="width: 47px;" />
                                <col style="width: auto;" />
                                <tr>
                                    <td valign="top" />
                                    <td class="AutoNumber_p_note" valign="top"><span><b>Tip &#160;</b></span>
                                    </td>
                                    <td class="AutoNumber_p_note" valign="top" data-mc-autonum="&lt;b&gt;Tip &#160;&lt;/b&gt;">We recommend that you set this to a relatively high value, at least 50. When repeatedly expanded, the catalog's internal structure may become fragmented and, consequently, catalog access less efficient.</td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr class="TableStyle-SynchTableStyle_interop-Body-Body2">
                        <td class="TableStyle-SynchTableStyle_interop-BodyB-Column1-Body2">cft.cftcat.auto_expand_max_size</td>
                        <td class="TableStyle-SynchTableStyle_interop-BodyB-Column1-Body2" style="text-align: center;">1M</td>
                        <td class="TableStyle-SynchTableStyle_interop-BodyA-Column1-Body2">
                            <p>The maximum number of records for the automatic catalog expansion option.</p>
                        </td>
                    </tr>
                </tbody>
            </table>
            <p>Related parameters:</p>
            <ul>
                <li>TLVCLEAR: Level below which the alert stops.</li>
                <li>TLVCEXEC: Batch to execute when the alert ends.</li>
                <li>TLVWRATE: The minimum amount of time, in seconds, to wait before resending an alert.</li>
                <li>TLVWEXEC: Batch to execute when CFTCAT/TLVWARN is reached.</li>
                <li>TLVWARN: Catalog usage limit before issuing an alert. When this limit is reached, the CFTCAT/TLVWEXEC is executed.</li>
            </ul>
            <p style="font-weight: bold;">Example</p>
            <p>The example is based on the following settings:</p>
            <ul>
                <li>catalog size = 100</li>
                <li>cft.cftcat.auto_expand_percent = 20</li>
                <li>cft.cftcat.auto_expand_max_size = 140</li>
            </ul>
            <p>When you reach the TLVWRATE (level=80%), the following messages are sent to the log:</p>
            <div class="indentTable">
                <table class="TableStyle-code_window" style="mc-table-style: url('../Resources/TableStyles/code_window.css');" cellspacing="0">
                    <col class="TableStyle-code_window-Column-Column1" />
                    <tr class="TableStyle-code_window-Body-Body1">
                        <td class="TableStyle-code_window-BodyD-Column1-Body1">
                            <p class="TableContents_1"> 12/10/17 17:53:30&#160; CFTC29W Catalog Alert fill threshold reached: <span class="bold_in_para">level=80%</span> ID=CAT0</p>
                            <p class="Footer_1"> 12/10/17 17:53:30&#160; CFTC13I Catalog resize (100 --&gt; 120) done</p>
                            <p class="TableContents_1"> 12/10/17 17:54:16&#160; CFTT17I _ STATE=HOLD &lt;IDTU=A0000029 PART=PARIS IDF=TXT IDT=J1718064&gt; </p>
                            <p class="TableContents_1"> 12/10/17 17:54:16&#160; CFTR12I SEND Treated for USER adaumer&#160; &lt;IDTU=A0000029 PART=PARIS IDF=TXT&gt;</p>
                            <p class="TableContents_1"> 12/10/17 17:54:16&#160; CFTS20I Communication file row number deleted: 00000252&#160;&#160;&#160; </p>
                            <p class="TableContents_1"> 12/10/17 17:54:16&#160; CFTC30W Catalog Alert cleared : level=67% ID=CAT0</p>
                        </td>
                    </tr>
                </table>
            </div>
            <p>The new fill rate is now 80/120 = 66.66%, well below TLVCLEAR, so the alerts stops at next update (the send command in this example). </p>
            <p>The message <span class="span_1">CFTC30W Catalog Alert cleared : level=67% ID=CAT0</span> indicates that the catalog is sufficient.  If it were not, the catalog would be extended again at next alert in TLVWRATE seconds.</p>
            <p>The catalog continues to fill until it reaches 80%. Expanding 20% more would resize the catalog to 144 records, which exceeds the limit (140), and the log displays:</p>
            <div class="indentTable">
                <table class="TableStyle-code_window" style="width: 85%;mc-table-style: url('../Resources/TableStyles/code_window.css');margin-left: 0;margin-right: auto;" cellspacing="0">
                    <col style="width: 432pt;" class="TableStyle-code_window-Column-Column1" />
                    <tr class="TableStyle-code_window-Body-Body1">
                        <td class="TableStyle-code_window-BodyD-Column1-Body1">
                            <p class="TableContents_1"> 12/10/17 18:06:57&#160; CFTC29W Catalog Alert fill threshold reached: level=80% ID=CAT0</p>
                            <p class="Footer_1"> 12/10/17 18:06:57&#160; CFTC13I Catalog resize (120 --&gt; 144) too much</p>
                            <p class="Footer_1"> 12/10/17 18:06:57&#160; CFTC13I Catalog resize (120 --&gt; 140) done</p>
                            <p class="TableContents_1"> 12/10/17 18:06:57&#160; CFTT17I _ STATE=HOLD &lt;IDTU=A000002P PART=PARIS IDF=TXT IDT=J1718092&gt; </p>
                            <p class="TableContents_1"> 12/10/17 18:06:57&#160; CFTR12I SEND Treated for USER adaumer&#160; &lt;IDTU=A000002P PART=PARIS IDF=TXT&gt;</p>
                            <p class="TableContents_1"> 12/10/17 18:06:57&#160; CFTS20I Communication file row number deleted: 00000269&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </p>
                            <p class="TableContents_1"> 12/10/17 18:06:57&#160; CFTC30W Catalog Alert cleared : level=69% ID=CAT0</p>
                        </td>
                    </tr>
                </table>
            </div>
            <p>The next time the catalog limit is reached, it can no longer expand and the log displays:</p>
            <div class="indentTable">
                <table class="TableStyle-code_window" style="mc-table-style: url('../Resources/TableStyles/code_window.css');margin-left: 0;margin-right: auto;width: 85%;" cellspacing="0">
                    <col style="width: 432pt;" class="TableStyle-code_window-Column-Column1" />
                    <tr class="TableStyle-code_window-Body-Body1">
                        <td class="TableStyle-code_window-BodyD-Column1-Body1">
                            <p class="TableContents_1"> 12/10/19 15:53:21&#160; CFTC29W Catalog Alert fill threshold reached: level=80% ID=CAT0</p>
                            <p class="Footer_1"> 12/10/19 15:53:21&#160; CFTC13E Catalog resize (140 --&gt; 210) reached max before expansion</p>
                            <p class="TableContents_1"> 12/10/19 15:53:21&#160; CFTC08I Purge Treated : no record found to delete.</p>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </body>
</html>