<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../" data-mc-toc-path="Security |Managing certificates|Command line operations" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Using PKIENTITY </title>
        <link rel="shortcut icon" href="../Resources/Images/favicon.ico" />
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/axway.css" rel="stylesheet" type="text/css" />
        <link href="../Resources/TableStyles/code_window.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div role="main" id="mc-main-content">
            <h1>Using PKIENTITY </h1>
            <h2>Create a list of certificate authority IDs </h2>
            <p>This topic describes how to create lists of certificate authority IDs in the PKI database. </p>
            <p>The maximum number of CAs that you can enter for the ROOTCID parameter of the CFTSSL command is 10. To overcome this limitation, use the PKIENTITY object  to create a list of up to 100 certificate authority IDs. You can then enter up to ten PKIENTITY objects in the CFTSSL&#160;ROOTCID parameter, to enable a maximum of 1000 certificate authorities IDs in the PKI&#160;database. </p>
            <table class="AutoNumber_p_note" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
                <col style="width: 25px;" />
                <col style="width: 45px;" />
                <col style="width: auto;" />
                <tr>
                    <td valign="top" />
                    <td class="AutoNumber_p_note" valign="top"><span><b>Note</b></span>
                    </td>
                    <td class="AutoNumber_p_note" valign="top" data-mc-autonum="&lt;b&gt;Note&lt;/b&gt;"> You can directly update PKIENTITY content in the PKI internal datafile without  modifying Transfer CFT parameter settings.</td>
                </tr>
            </table>
            <h2>Define a certificate list</h2>
            <p>To define a certificate list, use the PKIENTITY command with the following parameters:</p>
            <ul>
                <li>ID: An identifier is a case-insensitive string with a maximum of 32 characters. If the identifier contains spaces, enclose the identifier in single quotes. (<i>mandatory</i> <i>parameter</i>)</li>
                <li>CERTIFICATES: A list of up to 100 certificate IDs. Each ID is a case-insensitive string with a maximum of 32 characters.  There is no check other than syntax when you insert this parameter,  so if you use an ID in the CERTIFICATES list that is the same as a PKIENTITY object ID <span class="mc-variable axway_variables.Component_Short_Name variable">Transfer CFT</span> ignores this ID when loading CFTSSL properties.<br /></li>
                <li>MODE: An action on the certificate, CREATE, REPLACE, or DELETE.  (default = REPLACE)</li>
                <li>PKIFNAME: The name of the PKI internal datafile to use. (default = $CFTPKU)</li>
            </ul>
            <table class="AutoNumber_p_note" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
                <col style="width: 25px;" />
                <col style="width: 45px;" />
                <col style="width: auto;" />
                <tr>
                    <td valign="top" />
                    <td class="AutoNumber_p_note" valign="top"><span><b>Note</b></span>
                    </td>
                    <td class="AutoNumber_p_note" valign="top" data-mc-autonum="&lt;b&gt;Note&lt;/b&gt;">See the <a href="Transport/Using_the_PKICER_command.htm">PKICER</a> command for more information on certificate parameters and settings.</td>
                </tr>
            </table>
            <p> <b>Caution</b> &#160;The PKIENTITY command neither checks nor manages the existing certificates in the internal PKI internal datafile when creating a new certificates list.</p>
            <p class="tableCaption" data-mc-autonum=""><span class="autonumber"><span></span></span>Example</p>
            <p>This example creates a PKIENTITY called <span class="code">new_entity</span> that has 3 certificates, <span class="code">CA1</span>, <span class="code">CA2</span>, and <span class="code">CA3</span>.</p>
            <table class="TableStyle-code_window" style="width: 90%;mc-table-style: url('../Resources/TableStyles/code_window.css');" cellspacing="0">
                <col style="width: 432pt;" class="TableStyle-code_window-Column-Column1" />
                <tr class="TableStyle-code_window-Body-Body1">
                    <td class="TableStyle-code_window-BodyD-Column1-Body1">
                        <p class="code">PKIUTIL PKIENTITY id = new_entity, certificates = "(‘CA1’, ‘CA2’, ‘CA3’)"</p>
                    </td>
                </tr>
            </table>
            <p>In the CFTSSL&#160;definition that follows, the <span class="code">rootcid </span>parameter has two identifiers. However, you cannot distinguish in this definition if the identifiers correspond to a PKIENTITY or a PKICER object.</p>
            <table class="AutoNumber_p_note" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
                <col style="width: 25px;" />
                <col style="width: 45px;" />
                <col style="width: auto;" />
                <tr>
                    <td valign="top" />
                    <td class="AutoNumber_p_note" valign="top"><span><b>Note</b></span>
                    </td>
                    <td class="AutoNumber_p_note" valign="top" data-mc-autonum="&lt;b&gt;Note&lt;/b&gt;">The <span class="code">rootcid </span>parameter in the CFTSSL&#160;object can contain certificate IDs  (Root and Intermediate CAs), entities, or&#160;both.<br /></td>
                </tr>
            </table>
            <table class="TableStyle-code_window" style="mc-table-style: url('../Resources/TableStyles/code_window.css');width: 90%;" cellspacing="0">
                <col class="TableStyle-code_window-Column-Column1" />
                <tr class="TableStyle-code_window-Body-Body1">
                    <td class="TableStyle-code_window-BodyD-Column1-Body1">
                        <p class="code">(CFTUTIL) CFTSSL id&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; = server_name,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;direct&#160;&#160;&#160;&#160;&#160; = SERVER,</p>
                        <p class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;usercid &#160;&#160;&#160;&#160;= USER,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rootcid &#160;&#160;&#160;&#160;    = (‘new_entity’, 'CA4'),</p>
                        <p class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ciphlist &#160;&#160;&#160;   =&#160;(61,60,59,53,47),</p>
                        <p class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;verify&#160;&#160;&#160;&#160;&#160; = required,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; mode&#160;&#160;&#160;&#160;&#160;&#160;&#160; = replace&#160;&#160;&#160;&#160;&#160;&#160; </p>
                    </td>
                </tr>
            </table>
            <p>The next example shows the PKIENTITY command equivalent in the <span class="code">rootcid </span>(that is, the certificates defined earlier in this example).</p>
            <table class="TableStyle-code_window" style="mc-table-style: url('../Resources/TableStyles/code_window.css');width: 90%;" cellspacing="0">
                <col style="width: 432pt;" class="TableStyle-code_window-Column-Column1" />
                <tr class="TableStyle-code_window-Body-Body1">
                    <td class="TableStyle-code_window-BodyD-Column1-Body1">
                        <p class="code">(CFTUTIL) CFTSSL id&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; = server_name,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; direct&#160;&#160;&#160;&#160;&#160; = SERVER, </p>
                        <p class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;usercid &#160;&#160;&#160;&#160;= USER,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rootcid &#160;&#160;&#160;&#160;    =(‘CA1’, ‘CA2’, ‘CA3’, ‘CA4’),</p>
                        <p class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ciphlist &#160;&#160;&#160;   =(61,60,59,53,47),</p>
                        <p class="code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;verify&#160;&#160;&#160;&#160;&#160; = required,<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; mode&#160;&#160;&#160;&#160;&#160;&#160;&#160; = replace&#160;&#160;&#160;&#160;&#160;&#160; </p>
                    </td>
                </tr>
            </table>
            <h2>Troubleshoot</h2>
            <p>The actions described in this section lead to a PKIU26E error. For more information, see  <a href="../Troubleshooting/Messages_and_Codes/pkiutil_error_codes.htm">PKIUTIL error codes</a>. </p>
            <ul>
                <li>Inserting a PKIENTITY with MODE = CREATE using an ID that is already  in the database. For example, here the ID <span class="code">entity5</span>  already exists in the PKI database.</li>
            </ul>
            <table class="TableStyle-code_window" style="mc-table-style: url('../Resources/TableStyles/code_window.css');width: 90%;" cellspacing="0">
                <col style="width: 432pt;" class="TableStyle-code_window-Column-Column1" />
                <tr class="TableStyle-code_window-Body-Body1">
                    <td class="TableStyle-code_window-BodyD-Column1-Body1">
                        <p class="code">PKIU26E PKIENTITY _ Error ( PKI Record writing error {15008/0} () )</p>
                        <p class="code">PKIU00I PKIENTITY _ Failed  (id entity5,certificates=‘CA5',mode=create)</p>
                    </td>
                </tr>
            </table>
            <ul>
                <li>Deleting a PKIENTITY that is not in the database. In this example, <span class="code">entity6</span>  does not exist in the PKI database.</li>
            </ul>
            <table class="TableStyle-code_window" style="mc-table-style: url('../Resources/TableStyles/code_window.css');width: 90%;" cellspacing="0">
                <col style="width: 432pt;" class="TableStyle-code_window-Column-Column1" />
                <tr class="TableStyle-code_window-Body-Body1">
                    <td class="TableStyle-code_window-BodyD-Column1-Body1">
                        <p class="Footer">PKIU26E PKIENTITY _ Error ( No record found {15011/0} () )</p>
                        <p class="code">PKIU00I PKIENTITY _ Failed  (id=entity6, mode=delete)</p>
                    </td>
                </tr>
            </table>
            <ul>
                <li>Inserting a PKIENTITY when there is already a PKICER certificate in the internal datafile with the same ID.</li>
            </ul>
            <table class="TableStyle-code_window" style="mc-table-style: url('../Resources/TableStyles/code_window.css');width: 90%;" cellspacing="0">
                <col class="TableStyle-code_window-Column-Column1" />
                <tr class="TableStyle-code_window-Body-Body1">
                    <td class="TableStyle-code_window-BodyD-Column1-Body1">
                        <p class="code">PKIU26E PKIENTITY _ Error ( PKI record conflict: existing certificate {15039/0} () )</p>
                        <p class="code">PKIU00I PKIENTITY _ Failed&#160; (id=existing_PKICER,certificates=(an_id))</p>
                    </td>
                </tr>
            </table>
            <ul>
                <li>Inserting a PKICER when a PKIENTITY certificate exists with the same ID.</li>
            </ul>
            <table class="TableStyle-code_window" style="mc-table-style: url('../Resources/TableStyles/code_window.css');width: 90%;" cellspacing="0">
                <col class="TableStyle-code_window-Column-Column1" />
                <tr class="TableStyle-code_window-Body-Body1">
                    <td class="TableStyle-code_window-BodyD-Column1-Body1">
                        <p class="code">PKIU26E PKICER&#160;&#160; _ Error ( PKI record conflict: existing entity {15038/0} () )</p>
                        <p class="code">PKIU00I PKICER&#160;&#160; _ Failed&#160; (id='existing_PKIENTITY',comment='Axway MFT&#160; </p>
                        <p class="code">PKIU00I&#160;&#160;&#160;&#160; Demonstration Root Certificate"',iform='DER',iname  </p>
                        <p class="code">PKIU00I&#160;&#160; ='$CFTPKIDIR/Axway_MFT_Demonstration_Root_Certific  </p>
                        <p class="code">PKIU00I&#160;&#160;&#160;&#160;&#160;ate.der',itype='ROOT',pkifname='$CFTPKU'</p>
                        <p class="code">PKIU00I&#160;&#160;&#160; 'CFT',state='ACT',mode='CREATE')</p>
                    </td>
                </tr>
            </table>
        </div>
    </body>
</html>