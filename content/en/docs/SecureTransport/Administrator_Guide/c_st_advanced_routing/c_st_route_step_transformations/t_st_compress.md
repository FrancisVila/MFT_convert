{
    "title": "Compress",
    "linkTitle": "Compress",
    "weight": "240"
}The Compress transformation step compresses designated files as part of a route.

Use the following procedure to add a Compress step to a Route Package Template:

1.  Designate the files to be compressed.
2.  Determine whether or not to proceed with the route execution on step failure.
3.  Specify file compression options.
4.  Click **Save**.

<span id="Input-Files"></span>

## Input Files

The *Input Files* pane identifies files used as input to the Compress step. By default, the step will compress all files that were produced by the preceding step. Use the filtering options to designate the files to be compressed.

The Compress step processes files in the following manner:

<table>
   <thead>
      <tr>
<th style="text-align: center;" class="HeadE-Column1-Header1">Process only result from preceding step<br />
<span style="font-weight: normal;">checkbox status</span>         </th>
<th style="text-align: center;" class="HeadE-Column1-Header1">Name filter<br />
<span style="font-weight: normal;">option selected</span>         </th>
<th class="HeadD-Column1-Header1">Input files<br />
<span style="font-weight: normal;">result</span>         </th>
      </tr>
   </thead>
   <tbody>
      <tr>
         <td>selected         </td>
         <td>Process all files         </td>
         <td>all output files generated by the preceding step         </td>
      </tr>
      <tr>
         <td>selected         </td>
         <td>Process files based on a file name pattern         </td>
         <td>the output files generated by the preceding step that match the specified file name pattern         </td>
      </tr>
      <tr>
         <td>not selected         </td>
         <td>Process all files         </td>
         <td>all available files         </td>
      </tr>
      <tr>
         <td>not selected         </td>
         <td>Process files based on a file name pattern         </td>
         <td>the available files that match the specified file name pattern         </td>
      </tr>
   </tbody>
</table>

<span id="File2"></span>

### File name patterns

To use a file name pattern to identify files to compress:

1.  Select **Process files based on a file name pattern**.
2.  Choose pattern syntax.
    -   When **File Globbing** is selected, you can use '`?`' and '`*`' wildcard characters to define the pattern. For example, `*.txt` matches all files with the extension `.txt`.
    -   When **Regular expressions** is selected, you can use `Perl5.003` or Perl5 extended regular expressions. For example, `.*\.(txt|xml)` matches all files with the extension `.txt` or `.xml`.

    More examples of `glob` and `regexp` patterns are provided in the tooltip.
3.  Provide the pattern in the text box.

<span id="Proceed"></span>

## Route execution on step failure

When *Proceed with route execution on step failure* is selected, the route execution continues even if the step execution fails.

<span id="Compression"></span>

## Compression Options

In the *Compression Options* pane, you set the compression algorithm and level and choose whether to consolidate all input files in a single output archive. You can also password-protect the output ZIP files.

### Compression algorithms

The supported compression algorithms are ZIP, JAR, TAR, and GZIP. The compression of `tar.gz` archives requires two separate Compress steps. The first one is to add the files to a `tar` archive, and the second - to compress the `tar` file with `gzip`.

### Compression levels

The supported compression levels depend on the selected compression algorithm. With ZIP, GZip and JAR, you can choose among seven levels: *Store, Fastest, Fast, Normal, Good, Better,* and *Best*. *Store* adds the input files to archive without compression, and *Best* provides the highest, but slowest compression. As the compressed file's size decreases (from *Store* to *Best*), the time to compress increases.

With TAR, the only available level is *Normal* - compression with balanced settings.

<span id="Passwor"></span>

### Password protection

Password protection is only available with ZIP. To enable it, select the *Password for protected file* checkbox, type the desired password and confirm it.

### Number of output files and naming

With GZIP, the Compress step creates a separate archive for each input file.  
With ZIP, TAR and JAR, you can use the **Compress all files into a single archive** checkbox to control the number of output files.

-   When selected, all input files are compressed into a single archive. The name of that archive is defined using an EL expression that you enter in the text field below the option.

<!-- -->

-   When not selected, each input file is added to a separate archive. The name of a compressed file is composed of the full name (with the extension) of the input file and the compression algorithm appended as an extension.

Afterward, you can change the name of the output files by adding a <a href="../t_st_rename" class="MCXref xref">Rename</a> transformation step.

Â 

**Related topics:**

-   <a href="../t_st_decompress" class="MCXref xref">Decompress</a>
-   <a href="../t_st_rename" class="MCXref xref">Rename</a>
-   <a href="../t_st_pgp_encryption" class="MCXref xref">PGP Encryption</a>
-   <a href="../t_st_pgp_decryption" class="MCXref xref">PGP Decryption</a>
-   <a href="../t_st_line_ending" class="MCXref xref">Line Ending</a>
-   <a href="../t_st_external_script" class="MCXref xref">External Script</a>
-   <a href="../t_st_charset_conversion" class="MCXref xref">Encoding Conversion</a>
-   <a href="../t_st_replace" class="MCXref xref">Characters Replace</a>
-   <a href="../t_st_line_padding" class="MCXref xref">Line Padding</a>
-   <a href="../t_st_file_folding" class="MCXref xref">Line Folding</a>
-   <a href="../t_st_line_truncating" class="MCXref xref">Line Truncating</a>
