{
    "title": "Working with Payload integrity",
    "linkTitle": "Working with Payload integrity",
    "weight": "200"
}## Openssl example

Local submissions that are subject to payload integrity verification can have their signature generated using the openssl utility, for example:

openssl dgst -sha256 -sign &lt;gateway private key>.pem -out signature.sign &lt;payload file>

peltrans -fc &lt;payloadfile> -sigfile signature.sign -sigalgo SHA256withRSA ...

Note that the two parameters are exposed also in the model. The only difference in this case is that the signature attached via model is verified using the public key from Integrator. This is done on purpose to support the reference mode in which Integrator submits transfers via JMS. The assumption in this case is that the JMS message payload is not the business payload (what ends up in file component parameter) and can be used to store the signature generated by Integrator. This means that when routing the inbound JMS transfer in another transfer, the <span class="code">sigfile </span>parameter would refer the <span class="code">file\_component </span>of the JMS transfer, and the rest of the parameters of the resulting transfer would be filled from metadata (JMS properties included) attached to the JMS transfer.

The file referred by the <span class="code">sigfile </span>parameter must contain only the bytes of the signature in binary format.

These parameters are also displayed using <span class="code">peldsp </span>command as <span class="code">x\_sigalgo </span>and <span class="code">x\_sigdata</span>, containing the signature algorithm and the signature bytes encoded in hex format.

## Configuring payload integrity from the command line

To activate this feature, set the <span class="code">payload\_integrity\_option </span>to *yes* in the <span class="code">monitor </span>section of the configuration.

The rest of the parameters are stored in dedicated section named <span class="code">integrity</span>:

The private key of Gateway (and also its public key) can be configured with the <span class="code">private\_key </span>parameter. The value is the path to a file containing a RSA private key in pem format.

The private key file can be password-protected, and the password can be configured via the <span class="code">private\_key\_dk </span>and <span class="code">private\_key\_pf </span>parameters. The values for these parameters are a path to a derived key file and a path to a password file. The two files must be generated with the <span class="code">pelencpass </span>utility (See the [Security Guide](#) for further information).

The public key of Integrator can be configured with the <span class="code">public\_key </span>parameter. The value is a path to a file containing a RSA public key in pem format.

## Configuring payload integrity from Axway Navigator

All the parameters, except the one referring to the Integrator public key are in Gateway/Database/Protection section of the Configuration window.

The public key of Integrator can be configured in the Connectivity section dedicated to Integrator.

Links to documentation set for Axway Gateway <span class="mc-variable axway_variables.Release_Number variable">6.17.3</span>:

-   [Installation](#) -- [User](#) -- [Unix Configuration](#) -- [Upgrade](#) -- [Interoperability](#) -- [Security](#), requires login -- [Release Notes](#)
